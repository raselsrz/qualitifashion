import{N as f,aw as T,ax as m,a2 as E,ay as O,az as w,aA as D,aB as I,aC as N,af as U,a as e,au as y,x as H,aD as L,aE as R,aF as _,D as M}from"./app.DCvXxO1S.js";import{u as V,P as d,B as a,a as z,s as P,b as Y}from"./FooterLinks.B4tiSJ0g.js";function F(){const n=w();return n.analytics===""&&n.marketing===""&&n.preferences===""}function K(){const n=f(),t=T(n),c=m();return E(D)&&c&&!t&&O()&&F()}function G(){const{emitPrivacyBannerInteractionEvent:n,emitPrivacyBannerRenderEvent:t,emitPrivacyBannerInitializedEvent:c}=V();c();const p=f().searchParams.get("previewPrivacyBanner")==="true",i=K(),{closeOverlay:v}=I(),{data:r,loading:o,error:s}=N(Y,{cache:!1,skip:!i&&!p});if(U(()=>{o||!i||s||!r?.privacyBannerSettings||!r?.privacyBannerSettings?.showBannerOnCheckout||t()},[t,o,i,s,r]),o||(!i||!r?.privacyBannerSettings?.showBannerOnCheckout)&&!p)return null;if(s||!r?.privacyBannerSettings)return console.error("Error fetching consent banner data",s),null;const{title:g,text:b,policyLinkUrl:l,policyLinkText:B,buttonAcceptText:A,buttonDeclineText:S,buttonPrefsOpenText:x}=r.privacyBannerSettings,u=r.privacyBannerSettings.consentTrackingApiToken||void 0,h=l.includes("/policies/"),C=l.split("/").pop();return e(_,{defaultOpen:!0,id:d,heading:g||"",onHide:()=>{n(a.CloseCheckoutBanner)},primaryAction:e(M,{children:[e(y,{kind:"secondary",onPress:()=>{P(!0,u),n(a.Accept),v(d)},children:A}),e(y,{kind:"secondary",onPress:()=>{P(!1,u),n(a.Decline),v(d)},children:S})]}),secondaryAction:e(y,{kind:"plain",textDecoration:"none",onPress:()=>{n(a.ManagePreferences)},overlay:e(z,{...r.privacyBannerSettings.preferences,consentTrackingApiToken:u}),children:x}),children:e(H,{tone:"info",type:"small",children:[b,e(L,{to:h?void 0:l,external:!0,onPress:()=>{n(a.PrivacyPolicyView)},overlay:h?e(R,{handle:C||"privacy-policy",title:B}):void 0,children:B})]})})}export{G as default};
