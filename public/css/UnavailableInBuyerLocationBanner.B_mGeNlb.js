import{ae as P,bl as B,Z as O,af as k,i as D,bm as E,ad as M,bn as R,bo as V,G as x,J as W,K as H,e as Y,a as n,bp as w,bq as z,br as b,bs as J,bt as q,aD as h,z as G,al as K,W as Z,bu as j}from"./app.DCvXxO1S.js";function F(){const[e,o]=P(!1),s=B(),l=O(0);k(()=>{Date.now()<l.current||o(!1)},[s.lastNegotiation.value]);function _(){l.current=Date.now()+1e3,o(!0)}return{cartUpdated:e,setCartUpdated:_}}function X(){const e=D(),{violations:o}=E(b),{merchandiseLines:s,shippingAddress:l}=M(),{countryName:_,loading:v}=R(l.value),{value:u}=V(),p=x(),y=W(),d=H(),{negotiate:f}=Y(),{cartUpdated:g,setCartUpdated:A}=F();if(!u||u.lines.length===0||v)return null;if(g)return n(w,{heading:e("merchandise_unavailable_in_buyer_location.cart_updated","Your cart has been updated."),tone:"info"});if(o.size===0)return null;const t=z(Array.from(o),u,Array.from(b)),U=t?.map(({stableId:a})=>a),m=s.value.filter(({stableId:a})=>!U?.includes(a)),i=m.length===0;function C(){t!=null&&(s.value=m,f({onComplete:A}))}function I(){j(p,y,d.hasStorefront)}if(t==null)return null;const c=Array.from(o).some(({code:a})=>a==="MERCHANDISE_PRODUCT_NOT_PUBLISHED_IN_BUYER_LOCATION")?_??e("merchandise_unavailable_in_buyer_location.missing_country_fallback","your country"):e("merchandise_unavailable_in_buyer_location.indeterminate_location_fallback","your location");let r=null;i&&t.length===1?r=e("merchandise_unavailable_in_buyer_location.banner_title.all_products_one",{location_name:c},"The product in your cart is not available for delivery to %{location_name}."):i?r=e("merchandise_unavailable_in_buyer_location.banner_title.all_products_other",{location_name:c},"The products in your cart are not available for delivery to %{location_name}."):t.length===1?r=e("merchandise_unavailable_in_buyer_location.banner_title.some_products_one",{location_name:c},"This product is not available for delivery to %{location_name}."):r=e("merchandise_unavailable_in_buyer_location.banner_title.some_products_other",{location_name:c},"These products are not available for delivery to %{location_name}.");const L=i?null:n(q,{children:t.map(a=>n(J,{children:a.subtitle?e("merchandise_unavailable_in_buyer_location.unavailable_line_item",{product_name:a.title,variant_label:a.subtitle},"%{product_name} / %{variant_label}"):a.title},a.stableId))}),T=t.length===1?e("merchandise_unavailable_in_buyer_location.remove_items_action.one","remove unavailable item"):e("merchandise_unavailable_in_buyer_location.remove_items_action.other","remove unavailable items"),N=e("merchandise_unavailable_in_buyer_location.empty_cart_action","empty cart and return to store"),S=n(G,{children:!i||i&&d.hasStorefront?e("merchandise_unavailable_in_buyer_location.change_address_or_remove",{remove_action:i?n(h,{onPress:I,children:N}):n(h,{onPress:C,children:T})},"Change delivery address or %{remove_action}."):e("merchandise_unavailable_in_buyer_location.change_address_only","Change delivery address to continue.")});return n(Z,{heading:r,tone:"critical",children:n(K,{children:[L,S]})})}export{X as U};
